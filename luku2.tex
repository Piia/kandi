% !TEX root = aine.tex
\section{Jatkuva integraatio}

\subsection{Yksi yhteinen koodivarasto}

Jatkuvan integraation myötä samaa ohjelmakoodia muokkaavat kymmenet, sadat tai jopa tuhannet ohjelmistokehittäjät. Heidän kaikkien tulisi kommitoida tekemänsä muutokset vähintään kerran päivässä, joten ohjelmisto muuttuu alati. Ohjelmiston toimivuus ja oikeellisuus vaarantuvat muutoksessa. On huomattu, että paras tapa ehkäistä virheiden kasaantumista ja isoja rakenteellisia ongelmia on toteuttaa muutokset ja korjata virheet mahdollisimman tiuhaan. Kun kaikki ohjelmiston kehittämiseen osallistuvat ohjelmistokehittäjät työskentelevät yhteisen ohjelmakoodin parissa, ohjelmiston uusimman version toimimattomuudesta tulee yhteinen ongelma. 

Ohjelmistokehittäjät kokevat, että jatkuva integraatio on hyvä työskentelytapa. He saavat jatkuvan integraation myötä jatkuvaa palautetta työnsä toimivuudesta, eikä parempaakaan tapaa ole. Jatkuvan integraation esteiksi koetaan eniten ohjelmiston testaamisen osa-alueita, kuten testikokonaisuuden riittämättömyys tai testaamisen nopeus ja vaivattomuus. 

Ohjelmistokehitystiimi ei voi työskennellä luotettavasti rikkinäisen ohjelmiston parissa. Jatkuvan integraation palvelimen antama palaute testien läpäisystä toimii vakuutena koko ohjelmistokehitystiimille. Näin he voivat luottaa rakentavansa työnsä toimivan kokonaisuuden päälle ja uudet virheet voidaan paikantaa kommitin tarkkuudella. 

Jatkuvan integraation testitoiminnot voidaan jakaa karkeasti kahteen luokkaan: testaaminen ennen integraatiota ohjelmistokehittäjän omalla työkoneella ja jatkuvan integraation palvelimella suoritettava ohjelmiston testaaminen. Ohjelmistokehittäjän on testattava työnsä ennen integraatiota välttääkseen turhaan rikkomasta yhteistä ohjelmakoodia. 



\subsection{Regressiotestaaminen validoi muutokset}

Regressiotestaamista käytetään koko ohjelmiston toimivuuden ja oikeellisuuden testaamiseen muutoksien jälkeen. Ohjelmiston koko ja testien määrä on yleensä suuri. Ei ole missään määrin järkevää, että kaikki ohjelmiston parissa työskentelevät ohjelmistokehittäjät ajaisivat kaikki olemassaolevat testit päivittäin. Regressiotestaamista varten kootaan erikseen testikokonaisuus.

Integraatiotesteillä testataan sisäisesti ohjelmiston eri osien yhteensopivuus. Järjestelmätesteillä testataan ulkoisesti testitapauksia, jotka on tehty ohjelmistolle asetettujen vaatimuksien pohjalta. Järjestelmätesteillä saadaan selville, toimiiko ohjelmisto oikein. Regressiotestien ei tarvitse testata yksikkötesteillä uudelleen yksittäisiä koodinpätkiä, sillä ohjelmistokehittäjät testaavat koodinsa toimivuuden huolellisesti ennen integraatiota. Siitä huolimatta testikokonaisuuteen voidaan lisätä ohjelmiston toimivuuden kannalta tärkeitä yksikkötestejä.

Käyttäytymiseen perustuva regressiotestaaminen (behavioral regression testing) on eräs menetelmä, jossa regressiotestien lisäksi käytetään itsestään generoituvia testejä. Niillä pyritään testaamaan, käyttäytyykö ohjelmisto muutoksien jälkeen toivotulla tavalla. <sisäisesti, ulkoisesti vai molempia???>

<Tarkista, onko muita menetelmiä. Varmasti on. Tilaa on vielä lyhyesti selittää muutamia juttuja ja tästä aliluvusta voi hyvin supistaa tarvittaessa.>



\subsection{Kustannustehokkuus}

Jatkuva integraatio on kustannustehokkaampi kuin integraatio erillisenä tuotantovaiheena. Jatkuva integraatio lisää ohjelmistotuotantoprosessin läpinäkyvyyttä, eli ohjelmistoon syntyneet virheet tulevat heti koko ohjelmistokehitystiimin tietoon. Pienet virheet on suuria nopeampi korjata, mikä vähentää työtunteja ja ennen kaikkea aikataulun venymistä. Virheiden huomaaminen ennen niiden paisumista isoiksi ongelmiksi ehkäisee rikkonaisen ikkunan syndroomaa, eli ohjelmistokehittäjien taipumusta olla tarttumatta liian suuriin ongelmiin.

Toisaalta testitoimintojen ylläpitämiseenkin kuluu työaikaa. Pelkästään regressiotestien kehittämiseen ja ylläpitoon voi kulua yhtä paljon työaikaa kuin itse ohjelmakoodin kirjoittamiseen ja regressiotestaaminen on vain yksi osa ohjelmiston testaamista. Testitoiminnot voi myös rakentaa osin ulkopuolisen palveluntarjoajan palveluiden varaan. Niiden toiminta ja rajapinnat voivat muuttua, jolloin testejä pitää vastaavasti muuttaa.

Jatkuva ohjelmiston kokoaminen ja testien ajaminen voi johtaa palvelinresurssien riittämättömyyteen. Esimerkiksi Googlen testipalvelimella ajetaan päivittäin kaksi miljoonaa integraatiota. Siellä resurssien riittämättömyys on ratkaistu niin, että palvelin ajaa kokoamiset ja testaamiset muutaman kerran tunnissa, jolloin osa jonoon kertyneistä testeistä on samoja ja ne voidaan jättää ajamatta. <Ratkaisu oli laajempi, etsi se ja kirjoita tähän.>

Regressiotestaamisen testitulokset voi jakaa kahteen luokkaan: hyödyllisiin ja haitallisiin. <Nämä liittyivät jotenkin siihen, että on hyödyllistä ja kustannustehokasta löytää virheitä jatkuvan integraation myötä, mutta tietoisuus arkkitehtuurin pieleen menosta tms. lisäävät kustannuksia. Kuulostaa omituiselta, joten etsi lähde.>


\clearpage